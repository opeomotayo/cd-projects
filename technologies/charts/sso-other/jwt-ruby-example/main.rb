require 'jwt'

public_key_string = """
-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAsewaIX6Xidiyc8OZa6H9
+WNJbpPqHi5xSDSezrL5i6LcELBtrWr890vHCcwqDWcqmWkzvTG2bTMJnuBhL1x+
DexKn3KMzHxHQczOaeRZJhORsszu/CmslWu7AxcnTe4a9KpRBAGdsfvB4caVWA4o
wawe1SbwOWp8sNWh6h/i4Tv7pVdQoEkb6qBk8YW4vWbdvEMteXcL/qjaPyfsMPVQ
idp0pmEjXonu2cwCzTYUX4ITWuOe1hufTBF/G9XuU6/dCD+Da48/Ad3v2GT3bT7m
Awatb6RVhpUlSELHps/7q4zJVnpTxNsD4nN/QM7X1VO96uJL2C0RtqCiu1huF0ho
0wIDAQAB
-----END PUBLIC KEY-----
"""

public_key = OpenSSL::PKey::RSA.new(public_key_string)

token = "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJuXzhLOUo3THlDSzdCaEZYd2pnVDl6WjNUYmNhUXM5TG0wWlhQZzBac01RIn0.eyJleHAiOjE2MTI0OTQ0MzIsImlhdCI6MTYxMjQ5NDM3MiwiYXV0aF90aW1lIjoxNjEyNDkyOTUyLCJqdGkiOiI1NDEyZjY2NC03NjU4LTQwNTQtOTg2ZC01OTE1NjNjZWRmNjYiLCJpc3MiOiJodHRwczovL3Nzby5zc290ZXN0LnN0YWdpbmcudGFsa2luZ3F1aWNrbHkuY28udWsvYXV0aC9yZWFsbXMvbWFzdGVyIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjdkN2MyMTgzLTNkOTYtNDk2YS05NTE2LWRkYTc1Mzg4NTRjOSIsInR5cCI6IkJlYXJlciIsImF6cCI6Im9hdXRoMi1wcm94eSIsInNlc3Npb25fc3RhdGUiOiI2MTk2OWQ3Mi0wYTI1LTQyOWYtODQyYS0zZTYwYWE1YWMxY2YiLCJhY3IiOiIwIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIiwidW1hX2F1dGhvcml6YXRpb24iXX0sInJlc291cmNlX2FjY2VzcyI6eyJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6Im9wZW5pZCBlbWFpbCBwcm9maWxlIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsIm5hbWUiOiJCZW4gRGl4b24iLCJncm91cHMiOlsiL0RvY2tlclJlZ2lzdHJ5IiwiL0t1YmVybmV0ZXNBZG1pbnMiLCIvQWRtaW5pc3RyYXRvcnMiXSwicHJlZmVycmVkX3VzZXJuYW1lIjoidGFsa2luZ3F1aWNrbHkiLCJnaXZlbl9uYW1lIjoiQmVuIiwiZmFtaWx5X25hbWUiOiJEaXhvbiIsImVtYWlsIjoiYmVuQHRhbGtpbmdxdWlja2x5LmNvLnVrIn0.ZDWzHiui2K44td-DCOdPddsBsNsoONXB2qm6MVoGIj4qOSBEFkVaVRRmRZWHxHRfOaumqY3N9bZphepgAItqc5z1oKkOf0Y6eC7t80jnUPnTbM-ikMwm9qIQjgfreJ00JwgTQFyCcabB7h1eTzMgW6NkVH51yd0Hn9BVmWe3br3ZcAt2x0nez4r7qYtwlFZlxXuJkdRFsJtQeO25-orbTZrjcxHpdwme0yS_g6BF9SYL5trRk0g-x0lopFKC0xyYga6t-HYXEjwdEhvdFzzy11kI4iX_8zAYlkRxmwlEV5_JT9IGt9Ajb5rqNvB26T6loWdbP314v3-0uEpBWKSIAw"

decoded_token = JWT.decode token, public_key, true, { algorithm: 'RS256' }

puts decoded_token